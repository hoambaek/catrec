# PRD (Product Requirements Document)
## 모바일 웹 기반 실시간 필터 카메라 앱

---

## 1. 프로젝트 개요

### 1.1 프로젝트 명
실시간 필터 카메라 웹 애플리케이션

### 1.2 목적
모바일 브라우저에서 실시간 필터를 적용한 동영상 촬영 및 저장 기능을 제공하여, 브랜드 특화된 비주얼 콘텐츠 제작을 지원합니다.

### 1.3 배경
- 앱 설치 없이 모바일 브라우저에서 즉시 사용 가능한 촬영 도구 필요
- AI 기반 인물 세그멘테이션을 활용한 차별화된 필터 경험 제공
- 샴페인 브랜드 컬러를 활용한 프리미엄 비주얼 콘텐츠 생성

### 1.4 타겟 사용자
- 모바일 디바이스 사용자 (iOS Safari, Android Chrome)
- 소셜 미디어 콘텐츠 제작자
- 브랜드 경험을 공유하고자 하는 고객

---

## 2. 핵심 기능 요구사항

### 2.1 카메라 촬영 기능

#### 2.1.1 기본 카메라 접근
- **요구사항**: 모바일 브라우저에서 MediaDevices API를 통한 카메라 접근
- **기술 스펙**:
  - `navigator.mediaDevices.getUserMedia()` 활용
  - 전면/후면 카메라 선택 기능
  - 카메라 권한 요청 처리

#### 2.1.2 동영상 녹화
- **요구사항**: 실시간 필터가 적용된 상태로 동영상 녹화
- **기술 스펙**:
  - MediaRecorder API 사용
  - 지원 포맷: WebM (VP8/VP9) 또는 MP4 (H.264)
  - 권장 해상도: 1080p (1920x1080) 또는 720p (1280x720)
  - 프레임레이트: 30fps
- **UI 요소**:
  - 녹화 시작/정지 버튼
  - 녹화 시간 표시 (MM:SS)
  - 녹화 상태 인디케이터 (빨간 점 등)

#### 2.1.3 촬영 저장
- **요구사항**: 촬영된 동영상을 디바이스에 저장
- **기능**:
  - 자동 파일명 생성 (예: filter_video_YYYYMMDD_HHMMSS.webm)
  - 다운로드 트리거
  - 저장 완료 피드백 (토스트 메시지)

---

### 2.2 실시간 필터 시스템

#### 2.2.1 AI 기반 인물 세그멘테이션
- **요구사항**: 사람의 실루엣을 실시간으로 감지하여 블랙 처리
- **기술 스펙**:
  - TensorFlow.js + BodyPix 또는 MediaPipe Selfie Segmentation 활용
  - 실시간 처리 성능: 최소 15fps 이상
  - 세그멘테이션 정확도: 모바일 환경 최적화
- **시각적 결과**:
  - 인물 영역: 완전한 블랙 (#000000)
  - 배경 영역: 선택된 컬러 필터 적용

#### 2.2.2 배경 컬러 필터
- **요구사항**: 총 10가지 배경 컬러 필터 제공
- **컬러 팔레트**:
  1. **골드 톤 (샴페인 컬러)**
     - Gold Light: #A87932
     - Gold Medium: #C89B55
     - Gold Dark: #705430
  
  2. **딥 블루/그린 톤 (프리미엄 톤)**
     - Midnight Blue: #191970
     - Deep Teal: #004D40
     - Navy Blue: #003153
  
  3. **그린 톤 (자연/우아함)**
     - Forest Green: #228B22
     - Olive Green: #556B2F
     - Dark Cyan: #005B4B
  
  4. **크로마키 옵션**
     - Chroma Green: #00FF00 (표준 녹색)

#### 2.2.3 필터 UI/UX
- **필터 선택 인터페이스**:
  - 화면 하단 또는 측면에 필터 버튼 배치
  - 각 필터 버튼: 해당 컬러의 원형 또는 사각형 썸네일
  - 선택된 필터: 테두리 하이라이트 또는 체크 표시
- **필터 전환**:
  - 실시간 필터 전환 (녹화 중에도 가능)
  - 부드러운 트랜지션 효과 (optional)
- **필터 프리뷰**:
  - 촬영 전 실시간 프리뷰로 필터 효과 확인

---

## 3. 기술 스택 및 아키텍처

### 3.1 프론트엔드 기술 스택
- **핵심 프레임워크**: React 또는 Vanilla JavaScript
- **AI/ML 라이브러리**:
  - TensorFlow.js (v4.x)
  - @tensorflow-models/body-pix 또는 @mediapipe/selfie_segmentation
- **미디어 처리**:
  - MediaDevices API
  - MediaRecorder API
  - Canvas API (필터 렌더링)
- **스타일링**: Tailwind CSS 또는 CSS-in-JS

### 3.2 주요 컴포넌트 구조
```
App
├── CameraView
│   ├── VideoStream (카메라 피드)
│   ├── CanvasOverlay (필터 렌더링 레이어)
│   └── RecordingControls (녹화 버튼)
├── FilterSelector
│   └── FilterButton[] (10개 필터 버튼)
└── DownloadManager (저장 처리)
```

### 3.3 데이터 플로우
1. 카메라 스트림 획득 → VideoStream
2. VideoStream → Canvas (프레임 추출)
3. Canvas → TensorFlow.js (세그멘테이션)
4. 세그멘테이션 결과 + 선택된 컬러 → 필터 적용
5. 필터링된 Canvas → MediaRecorder
6. MediaRecorder → Blob → 다운로드

---

## 4. 사용자 시나리오 및 플로우

### 4.1 기본 사용 플로우
1. **진입**: 사용자가 웹사이트 접속
2. **권한 요청**: 카메라 권한 요청 팝업 → 허용
3. **필터 선택**: 10가지 필터 중 원하는 컬러 선택
4. **프리뷰**: 실시간으로 필터 효과 확인 (인물 블랙, 배경 컬러)
5. **녹화 시작**: 녹화 버튼 탭
6. **녹화 중**: 타이머 표시, 필터 변경 가능
7. **녹화 종료**: 정지 버튼 탭
8. **저장**: 자동 다운로드 또는 저장 버튼 탭
9. **완료**: 저장 완료 메시지 표시

### 4.2 예외 처리 시나리오
- **카메라 권한 거부**: 안내 메시지 + 설정 방법 가이드
- **지원하지 않는 브라우저**: 호환 브라우저 안내 (Chrome, Safari 최신 버전)
- **저사양 디바이스**: 성능 경고 또는 해상도 자동 조정
- **녹화 실패**: 재시도 버튼 제공

---

## 5. UI/UX 디자인 가이드라인

### 5.1 레이아웃
- **화면 구성**:
  - 상단: 타이틀 또는 브랜드 로고 (optional)
  - 중앙: 카메라 프리뷰 (전체 화면 또는 16:9 비율)
  - 하단: 필터 선택 버튼 (수평 스크롤)
  - 중앙 하단: 녹화 버튼 (큰 원형 버튼)

### 5.2 버튼 디자인
- **녹화 버튼**:
  - 녹화 전: 흰색 원형 테두리, 빨간 내부 원
  - 녹화 중: 빨간 사각형 (정지 아이콘)
- **필터 버튼**:
  - 크기: 50x50px 또는 60x60px
  - 모양: 원형 또는 둥근 사각형
  - 각 버튼의 배경색: 해당 필터 컬러
  - 선택 시: 두꺼운 흰색 테두리 (3-4px)

### 5.3 색상 및 타이포그래피
- **기본 배경**: 다크 톤 (#1a1a1a 또는 #000000)
- **텍스트**: 흰색 또는 밝은 회색
- **폰트**: 모던하고 가독성 좋은 산세리프 (예: Inter, Pretendard)

### 5.4 반응형 디자인
- 세로 모드 최적화 (Portrait)
- 안전 영역 고려 (iOS notch, Android navigation bar)
- 터치 타겟 크기: 최소 44x44px

---

## 6. 성능 요구사항

### 6.1 처리 성능
- **세그멘테이션 FPS**: 15fps 이상 (모바일)
- **녹화 FPS**: 30fps
- **필터 전환 지연**: 500ms 이하
- **초기 로딩 시간**: 3초 이내 (모델 로드 포함)

### 6.2 최적화 전략
- TensorFlow.js 모델 경량화 (MobileNet 기반)
- WebGL 가속 활용
- Canvas 렌더링 최적화
- 불필요한 재렌더링 방지 (React의 경우 useMemo, useCallback)

### 6.3 디바이스 지원
- **최소 사양**:
  - iOS 14+ (Safari)
  - Android 9+ (Chrome)
  - RAM: 2GB 이상
- **권장 사양**:
  - iOS 15+ / Android 11+
  - RAM: 4GB 이상

---

## 7. 보안 및 프라이버시

### 7.1 데이터 처리
- **로컬 처리**: 모든 비디오 및 세그멘테이션 처리는 클라이언트 측에서만 진행
- **서버 전송 없음**: 촬영된 비디오는 서버로 전송되지 않음
- **권한 관리**: 카메라 접근 권한 명확한 안내

### 7.2 준수 사항
- GDPR, 개인정보보호법 준수
- 사용자 동의 절차 (카메라 권한)

---

## 8. 테스트 계획

### 8.1 기능 테스트
- [ ] 카메라 접근 및 스트림 표시
- [ ] 10가지 필터 적용 및 실시간 전환
- [ ] 인물 세그멘테이션 정확도
- [ ] 녹화 시작/정지
- [ ] 파일 저장 및 다운로드

### 8.2 호환성 테스트
- [ ] iOS Safari (14, 15, 16, 17)
- [ ] Android Chrome (최신 3개 버전)
- [ ] 다양한 디바이스 (iPhone, Galaxy, Pixel 등)

### 8.3 성능 테스트
- [ ] 저사양 디바이스에서 FPS 측정
- [ ] 메모리 사용량 모니터링
- [ ] 배터리 소모 테스트 (장시간 녹화)

### 8.4 사용자 테스트
- [ ] 5-10명의 베타 테스터 모집
- [ ] 사용성 피드백 수집
- [ ] 버그 리포트 수집

---

## 9. 개발 일정 (예상)

### Phase 1: 기본 구조 (1주)
- 프로젝트 셋업
- 카메라 스트림 구현
- 기본 UI 레이아웃

### Phase 2: 필터 시스템 (2주)
- TensorFlow.js 통합
- 세그멘테이션 모델 구현
- 10가지 컬러 필터 적용 로직

### Phase 3: 녹화 기능 (1주)
- MediaRecorder 통합
- 녹화 컨트롤 UI
- 파일 저장 기능

### Phase 4: 최적화 및 테스트 (1주)
- 성능 최적화
- 크로스 브라우저 테스트
- 버그 수정

### Phase 5: 배포 및 모니터링 (1주)
- 프로덕션 배포
- 사용자 피드백 수집
- 긴급 이슈 대응

**총 예상 기간**: 6주

---

## 10. 성공 지표 (KPI)

### 10.1 기술적 지표
- 세그멘테이션 FPS: 평균 20fps 이상
- 앱 크래시율: 1% 미만
- 초기 로딩 시간: 평균 2초 이하

### 10.2 사용자 경험 지표
- 촬영 완료율: 80% 이상
- 평균 녹화 시간: 15-30초
- 필터 변경 횟수: 사용자당 평균 2-3회

### 10.3 비즈니스 지표
- 월간 활성 사용자 (MAU)
- 소셜 미디어 공유율
- 사용자 만족도 (설문조사)

---

## 11. 향후 확장 가능성

### 11.1 추가 기능 아이디어
- **프리셋 필터**: 미리 정의된 필터 조합 (예: "골드 프리미엄", "오션 블루")
- **스티커/오버레이**: 브랜드 로고나 텍스트 추가
- **음악 삽입**: 배경 음악 선택 기능
- **실시간 공유**: 촬영 후 소셜 미디어 직접 공유
- **AR 효과**: 얼굴 인식 기반 AR 필터

### 11.2 기술적 개선
- 더 정교한 세그멘테이션 모델 (헤어 디테일 등)
- 하드웨어 가속 최적화 (WebGPU)
- PWA 전환 (오프라인 지원)

---

## 12. 리스크 및 대응 방안

| 리스크 | 영향도 | 대응 방안 |
|--------|--------|-----------|
| 모바일 성능 부족 | 높음 | 해상도 자동 조정, 경량 모델 사용 |
| 브라우저 호환성 문제 | 중간 | Polyfill 제공, 지원 브라우저 안내 |
| AI 모델 정확도 저하 | 중간 | 모델 파인튜닝, 후처리 필터 적용 |
| 사용자 권한 거부 | 낮음 | 명확한 안내 메시지, 재요청 플로우 |

---

## 13. 참고 자료

### 13.1 기술 문서
- [MediaDevices API - MDN](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices)
- [MediaRecorder API - MDN](https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder)
- [TensorFlow.js - BodyPix](https://github.com/tensorflow/tfjs-models/tree/master/body-pix)
- [MediaPipe Selfie Segmentation](https://google.github.io/mediapipe/solutions/selfie_segmentation.html)

### 13.2 디자인 레퍼런스
- Instagram 카메라 필터 UI
- TikTok 촬영 인터페이스
- Snapchat Lens Studio

